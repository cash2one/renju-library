<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
		<link type="text/css" rel="stylesheet" href="/static/css/style.css"/>
		<title>五子棋谱库</title>
	</head>
	<body>
		<table width="80%" align="center" border="0" cellspacing="0" cellpadding="0">
			<tr>
				<td colspan="5" align="left" style="font-size:14px;">
					{% if not session %}
					<a href="/account/login">登录</a>
					{% else %}
					你好，{{ session['nickName'] }}&nbsp;&nbsp;<a href="/account/logout">退出</a>
					{% end %}
				</td>
			</tr>
			<tr>
				<td width="15%">
					&nbsp;
				</td>
				<td width="10%" align="center" valign="center">
					<img src="/static/img/qr_code_1.jpg" width="80", height="80">
				</td>
				<td width="50%" align="center" valign="center" style="font-size:28px;">
					五子棋谱库
				</td>
				<td width="10%" align="center" valign="center">
					<img src="/static/img/qr_code_2.jpg" width="80", height="80">
				</td>
				<td width="15%" align="right" valign="center">
					<a href="/library/search" target="_blank">搜索</a>
					&nbsp;
					{% if not session %}
					&nbsp;
					{% else %}
					<a href="/library/viewOrEdit" target="_blank">新建</a>
					{% end %}
				</td>
			</tr>
			<tr>
				<td colspan="5">&nbsp;</td>
			</tr>
		</table>
		<table width="80%" align="center" border="1" cellspacing="0" cellpadding="0">
			<tr bgcolor="#b5b5b5">
				<td width="50%" align="center" class="solid">标题</td>
				<td align="center" class="solid">黑棋</td>
				<td align="center" class="solid">白棋</td>
				<td width="60px" align="center" class="solid">棋谱</td>
			</tr>
			{% for i in range(len(libraries)) %}
			{% set library = libraries[i] %}
			<tr bgcolor="{{ '#ffffff' if i % 2 == 0 else '#efefef' }}" onclick="javascript:window.open('/library/viewOrEdit?id={{ library.id }}');">
				<td width="50%" align="left" class="solid">
					<a href="#">{{ library.title if len(library.title) > 0 else '无标题' }}</a>
				</td>
				<td align="center" class="solid">
					{{ library.blackPlayerName }}
				</td>
				<td align="center" class="solid">
					{{ library.whitePlayerName }}
				</td>
				<td width="60px" align="center" class="solid">
					<a href="#">查看</a>
				</td>
			</tr>
			{% end %}
		</table>
		<table width="80%" align="center" border="0" cellspacing="0" cellpadding="0">
			<tr>
				<td>&nbsp;</td>
			</tr>
			<tr>
				<td align="center">
					{% set threshold = 5 %}
					{% if page_num > threshold %}
					<a href="/library/list?page=0" class="pageNumber">1</a>...
					{% end %}

					{% for i in range(max(page_num - threshold, 0), min(page_num + threshold + 1, page_count)) %}
					<a href="/library/list?page={{ i }}" class="{{ 'pageNumber' if i != page_num else 'currentPage' }}">{{ i + 1 }}</a>
					{% end %}

					{% if page_num < page_count - 1 - threshold %}
					...<a href="/library/list?page={{ page_count - 1 }}" class="pageNumber">{{ page_count }}</a>
					{% end %}
				</td>
			</tr>
		</table>
	</body>
</html>
